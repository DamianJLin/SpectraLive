Code taken and modified from https://github.com/PHYS3888/SpikerStream